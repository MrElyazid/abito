<h1>Users</h1>

<table class="table table-striped table-hover">
  <thead class="table-dark">
    <tr>
      <th>Email</th>
      <th>Admin?</th>
      <th>Joined At</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.email %></td>
        <td><%= user.admin? ? 'Yes' : 'No' %></td>
        <td><%= user.created_at.strftime('%Y-%m-%d %H:%M') %></td>
        <td>
          <%# Optional: Link to show view if created %>
          <%#= link_to 'View', admin_user_path(user), class: 'btn btn-sm btn-info me-2' %>

          <% if user == current_user %>
            <button class="btn btn-sm btn-danger disabled" title="Cannot delete yourself">Delete</button>
          <% else %>
            <%= link_to 'Delete', admin_user_path(user), data: { turbo_method: :delete, turbo_confirm: 'Are you sure? This will delete the user and potentially their associated data.' }, class: 'btn btn-sm btn-danger' %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
