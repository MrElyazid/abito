<%# Welcome Banner %>
<div class="p-5 mb-4 bg-light rounded-3">
  <div class="container-fluid py-5">
    <h1 class="display-5 fw-bold">Welcome to Abito!</h1>
    <p class="col-md-8 fs-4">Your one-stop shop for the best products online. Browse our categories or check out our featured items below.</p>
    <%= link_to "Browse All Products", products_path, class: "btn btn-primary btn-lg" %>
  </div>
</div>

<%# Featured Products Section %>
<div class="container">
  <h2>Featured Products</h2>
  <hr>
  <% if @featured_products.any? %>
    <div class="row">
      <% @featured_products.each do |product| %>
        <div class="col-md-4 mb-4">
          <div class="card h-100">
            <% if product.image.attached? %>
              <%= image_tag product.image.variant(resize_to_limit: [300, 200]), class: "card-img-top", alt: product.name %>
            <% else %>
              <img src="https://picsum.photos/seed/<%= product.id %>/300/200" class="card-img-top" alt="<%= product.name %> placeholder">
            <% end %>
            <div class="card-body d-flex flex-column">
              <h5 class="card-title"><%= link_to product.name, product_path(product) %></h5>
              <p class="card-text flex-grow-1"><%= truncate(product.description, length: 80) %></p>
              <div class="mt-auto">
                <p class="card-text"><strong>Price:</strong> <%= number_to_currency(product.price) %></p>
                <%= link_to "View Details", product_path(product), class: "btn btn-primary me-2" %>
                <% if user_signed_in? %>
                  <%= button_to "Add to Cart", product_cart_items_path(product), method: :post, class: "btn btn-success btn-sm d-inline-block" %>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p>No featured products available at the moment.</p>
  <% end %>
</div>
